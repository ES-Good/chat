(function(){"use strict";var e={816:function(e,s,n){var t=n(963),o=n(252),a=n(577);const r={class:"container-fluid"},i=(0,o._)("span",{class:"button-sidebar-admin__line"},null,-1),l=[i],u={class:"container content"};function c(e,s,n,t,i,c){const d=(0,o.up)("SidebarAdmin"),m=(0,o.up)("Header"),g=(0,o.up)("MessageContainer"),p=(0,o.up)("LoginUser"),h=(0,o.up)("RegistrationUser"),f=(0,o.up)("modal");return(0,o.wg)(),(0,o.iD)("div",r,[i.isAdmin?((0,o.wg)(),(0,o.iD)("button",{key:0,onClick:s[0]||(s[0]=(...e)=>c.openSidebarAdmin&&c.openSidebarAdmin(...e)),class:(0,a.C_)([{"button-sidebar-admin_active":i.statusSidebarAdmin},"button-sidebar-admin"])},l,2)):(0,o.kq)("",!0),i.isAdmin?((0,o.wg)(),(0,o.j4)(d,{key:1,open:i.statusSidebarAdmin},null,8,["open"])):(0,o.kq)("",!0),(0,o._)("div",u,[(0,o.Wm)(m,{onOpenModalLogin:c.showModalLogin,onOpenModalRegistration:c.showModalRegistration},null,8,["onOpenModalLogin","onOpenModalRegistration"]),(0,o.Wm)(g),(0,o.Wm)(f,{class:(0,a.C_)({"modal-show":i.openModal}),onCloseModal:c.closeModal},{default:(0,o.w5)((()=>[i.modalLogin?((0,o.wg)(),(0,o.j4)(p,{key:0})):((0,o.wg)(),(0,o.j4)(h,{key:1}))])),_:1},8,["class","onCloseModal"])])])}const d={class:"header"},m={key:0,class:"header__button-box"},g={key:1,class:"title"};function p(e,s,n,t,r,i){return(0,o.wg)(),(0,o.iD)("header",d,[t.userInfo?((0,o.wg)(),(0,o.iD)("h1",g,(0,a.zw)(t.userInfo),1)):((0,o.wg)(),(0,o.iD)("div",m,[(0,o._)("button",{class:"button button_header",onClick:s[0]||(s[0]=s=>e.$emit("openModalLogin"))},"Войти"),(0,o._)("button",{class:"button button_header",onClick:s[1]||(s[1]=s=>e.$emit("openModalRegistration"))},"Зарегестрироватся")]))])}var h=n(977);const f={apiKey:"AIzaSyDc8TC8zTYr5fJ7nCSZ8-eIUBlCL9MTrPE",authDomain:"chat-887ce.firebaseapp.com",projectId:"chat-887ce",storageBucket:"chat-887ce.appspot.com",messagingSenderId:"41477159920",appId:"1:41477159920:web:767f7899add428093c3b35",measurementId:"G-X2N158NY5H"},w=(0,h.ZF)(f);var b=n(451);const v=(0,b.v0)(w);function _(e){(0,b.Aj)(v,(s=>{if(s){const n=s;e.value=n.email,localStorage.setItem("user",n.email)}else console.log("not user")}))}var y=n(262),M={name:"Header",emits:["openModalLogin","openModalRegistration"],setup(){let e=(0,y.iH)(null);return _(e),{userInfo:e}}},k=n(744);const U=(0,k.Z)(M,[["render",p]]);var x=U;const A={class:"message-block"};function D(e,s,n,t,a,r){const i=(0,o.up)("ShowMessages"),l=(0,o.up)("SendingMessages");return(0,o.wg)(),(0,o.iD)("div",A,[(0,o.Wm)(i,{messagesUsers:t.messages},null,8,["messagesUsers"]),(0,o.Wm)(l)])}function C(e,s,n,a,r,i){return(0,o.wg)(),(0,o.iD)("form",{onKeyup:s[3]||(s[3]=(0,t.D2)((0,t.iM)(((...e)=>i.submit&&i.submit(...e)),["exact"]),["enter"])),class:"sending-messages-form"},[(0,o.wy)((0,o._)("textarea",{"onUpdate:modelValue":s[0]||(s[0]=e=>r.textUser=e),onKeydown:s[1]||(s[1]=(...s)=>e.showDownButton&&e.showDownButton(...s)),placeholder:"Введите сообщение",class:"sending-messages-form__textaria"},null,544),[[t.nr,r.textUser]]),(0,o._)("button",{onClick:s[2]||(s[2]=(0,t.iM)(((...e)=>i.submit&&i.submit(...e)),["prevent"])),class:"sending-messages-form__button"},"Отправить")],32)}var S=n(355);function O(e){const s=/(?<=^|[^а-я])(([уyu]|[нзnz3][аa]|(хитро|не)?[вvwb][зz3]?[ыьъi]|[сsc][ьъ']|(и|[рpr][аa4])[зсzs]ъ?|([оo0][тбtb6]|[пp][оo0][дd9])[ьъ']?|(.\B)+?[оаеиeo])?-?([еёe][бb6](?!о[рй])|и[пб][ае][тц]).*?|([нn][иеаaie]|([дпdp]|[вv][еe3][рpr][тt])[оo0]|[рpr][аa][зсzc3]|[з3z]?[аa]|с(ме)?|[оo0]([тt]|дно)?|апч)?-?[хxh][уuy]([яйиеёюuie]|ли(?!ган)).*?|([вvw][зы3z]|(три|два|четыре)жды|(н|[сc][уuy][кk])[аa])?-?[бb6][лl]([яy](?!(х|ш[кн]|мб)[ауеыио]).*?|[еэe][дтdt][ь']?)|([рp][аa][сзc3z]|[знzn][аa]|[соsc]|[вv][ыi]?|[пp]([еe][рpr][еe]|[рrp][оиioеe]|[оo0][дd])|и[зс]ъ?|[аоao][тt])?[пpn][иеёieu][зz3][дd9].*?|([зz3][аa])?[пp][иеieu][дd][аоеaoe]?[рrp](ну.*?|[оаoa][мm]|([аa][сcs])?([иiu]([лl][иiu])?[нщктлtlsn]ь?)?|([оo](ч[еиei])?|[аa][сcs])?[кk]([оo]й)?|[юu][гg])[ауеыauyei]?|[мm][аa][нnh][дd]([ауеыayueiи]([лl]([иi][сзc3щ])?[ауеыauyei])?|[оo][йi]|[аоao][вvwb][оo](ш|sh)[ь']?([e]?[кk][ауеayue])?|юк(ов|[ауи])?)|[мm][уuy][дd6]([яyаиоaiuo0].*?|[еe]?[нhn]([ьюия'uiya]|ей))|мля([тд]ь)?|лять|([нз]а|по)х|м[ао]л[ао]фь([яию]|[её]й))(?=($|[^а-я]))/gi;return e?e.replaceAll(s,"сладкий"):""}const z="b4M0D3XB6sXBgOih7fCguG35ekJ2";let j=(0,S.N8)(w);const I=(0,b.v0)(w);let T=(0,S.iH)(j,"/messages"),H={};async function L(e){if(!e.length)return;let s=(0,S.VF)(T),n={name:H.email?H.email:"Anonym",admin:H.id===z,text:O(e),id:s.key};(0,S.t8)(s,n)}(0,b.Aj)(I,(e=>{if(e){const s=e;H.email=s.email,H.id=s.uid,localStorage.setItem("user",s.email)}else console.log("not user")}));var Z={name:"SendingMessages",data(){return{textUser:"",key:""}},emits:["messageSent"],methods:{submit(){L(this.textUser.trim()),this.textUser=""}}};const R=(0,k.Z)(Z,[["render",C]]);var $=R,B=n.p+"img/admin-logo.924ebfa0.gif";const N={class:"messages-wrapper"},W={class:"messages-container"},V=(0,o._)("img",{class:"user-logo",src:B,alt:""},null,-1);function X(e,s,n,t,r,i){const l=(0,o.up)("user-message");return(0,o.wg)(),(0,o.iD)("div",N,[(0,o._)("div",W,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.messagesUsers,(e=>((0,o.wg)(),(0,o.j4)(l,{message:e,class:(0,a.C_)({"my-message":e.name===i.user}),key:e.id},(0,o.Nv)({"name-user":(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.name),1)])),"text-message":(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.text),1)])),_:2},[e.admin?{name:"user-ico",fn:(0,o.w5)((()=>[V])),key:"0"}:void 0]),1032,["message","class"])))),128))])])}const K={class:"user-message"},q={class:"user-message__header"},E={class:"user-message__name-user"},P={class:"user-message__text"};function Y(e,s,n,t,a,r){const i=(0,o.up)("btnDelMessage");return(0,o.wg)(),(0,o.iD)("div",K,[(0,o._)("div",q,[(0,o._)("p",E,[(0,o.WI)(e.$slots,"name-user",{},(()=>[(0,o.Uk)(" По каким то причинам имя недоступно... ")]))]),(0,o.WI)(e.$slots,"user-ico")]),(0,o._)("p",P,[(0,o.WI)(e.$slots,"text-message",{},(()=>[(0,o.Uk)(" По каким то причинам сообщение недоступно... ")]))]),r.thisAdmin?((0,o.wg)(),(0,o.j4)(i,{key:0,idMassege:n.message.id},null,8,["idMassege"])):(0,o.kq)("",!0)])}function F(e,s,n,t,a,r){return(0,o.wg)(),(0,o.iD)("button",{class:"button-del button-del_user-message",onClick:s[0]||(s[0]=(...e)=>r.delMessage&&r.delMessage(...e))},"del")}let G=(0,S.N8)(w);function J(e){let s=`/messages/${e}`,n=(0,S.iH)(G,s);(0,S.Od)(n)}var Q={name:"btnDelMessage",props:{idMassege:String},methods:{delMessage(){J(this.idMassege)}},computed:{thisAdmin(){return ThisIsAdmin}}};const ee=(0,k.Z)(Q,[["render",F]]);var se=ee;const ne=(0,b.v0)(w),te="b4M0D3XB6sXBgOih7fCguG35ekJ2";let oe=!1,ae=new Promise(((e,s)=>{(0,b.Aj)(ne,(s=>{if(s){const n=s;e(oe=n.uid===te)}else console.log("not user")}))}));var re={components:{btnDelMessage:se},emits:["pushMessage"],props:{message:Object},computed:{thisAdmin(){return oe}}};const ie=(0,k.Z)(re,[["render",Y]]);var le=ie,ue={name:"ShowMessages",components:{UserMessage:le},props:{messagesUsers:Object},computed:{user(){return localStorage.getItem("user")}}};const ce=(0,k.Z)(ue,[["render",X]]);var de=ce;let me=(0,S.N8)(w),ge=(0,S.iH)(me,"/messages");function pe(e){(0,S.jM)(ge,(s=>{let n=s.val();e.value=n}))}var he={name:"MessageContainer",components:{ShowMessages:de,SendingMessages:$},setup(){let e=(0,y.iH)(null);return pe(e),{messages:e}}};const fe=(0,k.Z)(he,[["render",D]]);var we=fe;const be={class:"form-container"},ve=(0,o._)("button",{class:"button"},"Войти",-1),_e={key:1,class:"form-container__registered-text"};function ye(e,s,n,r,i,l){return(0,o.wg)(),(0,o.iD)("div",be,[i.login?((0,o.wg)(),(0,o.iD)("p",_e,"Вы вошли как "+(0,a.zw)(i.email),1)):((0,o.wg)(),(0,o.iD)("form",{key:0,class:"form-modal",onSubmit:s[2]||(s[2]=(0,t.iM)(((...e)=>l.loginUser&&l.loginUser(...e)),["prevent"]))},[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>i.email=e),type:"text",placeholder:"E-mail",class:"form-modal__input"},null,512),[[t.nr,i.email]]),(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>i.password=e),type:"password",name:"",placeholder:"Пароль",autocomplete:"current-password",class:"form-modal__input"},null,512),[[t.nr,i.password]]),ve],32))])}const Me=(0,b.v0)(w);function ke(e,s){(0,b.e5)(Me,e,s).then((e=>{const s=e.user;console.log(s)})).catch((e=>{const s=e.code,n=e.message;console.log(s),console.log(n)}))}const Ue=/^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/iu;function xe(e){return!Ue.test(e)}function Ae(e){return e.length<6}var De={name:"LoginUser",data(){return{email:"",password:"",errorText:"",login:!1}},methods:{loginUser(){xe(this.email)&&Ae(this.password)?this.errorText="Некорректный email и пароль":xe(this.email)?this.errorText="Не корректный email":Ae(this.password)?this.errorText="Не корректный пароль, не менее 6 символов":(ke(this.email,this.password),this.login=!0)}}};const Ce=(0,k.Z)(De,[["render",ye]]);var Se=Ce;const Oe={class:"modal"};function ze(e,s,n,a,r,i){return(0,o.wg)(),(0,o.iD)("div",{class:"owerlay-modal",onClick:s[1]||(s[1]=(0,t.iM)((s=>e.$emit("closeModal")),["self"]))},[(0,o._)("div",Oe,[(0,o.WI)(e.$slots,"default"),(0,o._)("button",{class:"button-close-modal",title:"Закрыть",onClick:s[0]||(s[0]=(0,t.iM)((s=>e.$emit("closeModal")),["self"]))},"Close Modal")])])}var je={name:"Modal"};const Ie=(0,k.Z)(je,[["render",ze]]);var Te=Ie;const He={class:"form-container"},Le={key:0,class:"form-modal__error-text"},Ze=(0,o._)("button",{class:"button"},"Зарегестрироватся",-1),Re={key:1,class:"form-container__registered-text"};function $e(e,s,n,r,i,l){return(0,o.wg)(),(0,o.iD)("div",He,[i.registered?((0,o.wg)(),(0,o.iD)("p",Re,"Вы зарегестрировались как "+(0,a.zw)(i.email),1)):((0,o.wg)(),(0,o.iD)("form",{key:0,class:"form-modal",onSubmit:s[2]||(s[2]=(0,t.iM)(((...e)=>l.RegistrationUser&&l.RegistrationUser(...e)),["prevent"]))},[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>i.email=e),type:"text",placeholder:"E-mail",class:"form-modal__input"},null,512),[[t.nr,i.email]]),(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>i.password=e),type:"password",name:"",placeholder:"Пароль",autocomplete:"current-password",class:"form-modal__input"},null,512),[[t.nr,i.password]]),i.errorText?((0,o.wg)(),(0,o.iD)("p",Le,(0,a.zw)(i.errorText),1)):(0,o.kq)("",!0),Ze],32))])}const Be=(0,S.N8)(w);function Ne(e,s="nonym"){const n=(0,S.iH)(Be,"/users/"+e);let t={name:s,uid:e};(0,S.t8)(n,t)}const We=(0,b.v0)(w);function Ve(e,s){(0,b.Xb)(We,e,s).then((e=>{const s=e.user;return Ne(s.uid,s.email),!1})).catch((e=>{const s=e.code,n=e.message;return console.log(s),console.log(n),!0}))}const Xe=(0,b.v0)(w);function Ke(e,s){return(0,b.Xb)(Xe,e,s).then((e=>{e.user;return!1})).catch((e=>{const s=e.code,n=e.message;return console.log(s),console.log(n),!0}))}var qe={name:"RegistrationUser",data(){return{email:"",password:"",errorText:"",registered:!1}},methods:{async RegistrationUser(){if(xe(this.email)&&Ae(this.password))return void(this.errorText="Некорректный email и пароль");if(xe(this.email))return void(this.errorText="Не корректный email");if(Ae(this.password))return void(this.errorText="Не корректный пароль, не менее 6 символов");let e=await Ke(this.email,this.password);e?this.errorText="Такой пользователь уже существует":(Ve(this.email,this.password),this.registered=!0)}}};const Ee=(0,k.Z)(qe,[["render",$e]]);var Pe=Ee;const Ye={class:"sidebar-admin__inner"};function Fe(e,s,n,t,r,i){const l=(0,o.up)("AllUsers");return(0,o.wg)(),(0,o.iD)("div",{class:(0,a.C_)(["sidebar-admin",{"sidebar-admin_open":n.open}])},[(0,o._)("div",Ye,[(0,o.Wm)(l)])],2)}const Ge={class:"sidebar-admin__users-block"},Je=["value"];function Qe(e,s,n,r,i,l){return(0,o.wg)(),(0,o.iD)("div",Ge,[(0,o.wy)((0,o._)("select",{class:"sidebar-admin__select","onUpdate:modelValue":s[0]||(s[0]=e=>i.user=e)},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.AllUsers,(e=>((0,o.wg)(),(0,o.iD)("option",{key:e.uid,value:e.uid},(0,a.zw)(e.name),9,Je)))),128))],512),[[t.bM,i.user]]),(0,o._)("p",null,[(0,o.Uk)("Количество пользователей: "),(0,o._)("b",null,(0,a.zw)(i.AllUsersCount),1)])])}let es=(0,S.N8)(w),ss=(0,S.iH)(es);function ns(){return(0,S.U2)((0,S.iU)(ss,"/users")).then((e=>e.exists()?e.val():(console.log("No data available"),"No data available"))).catch((e=>{console.error(e)}))}var ts={name:"AllUsers",data(){return{AllUsers:null,user:null,AllUsersCount:null}},watch:{user(){console.log(this.user)}},async mounted(){let e=await ns();this.AllUsers=e,this.AllUsersCount=Object.keys(this.AllUsers).length,this.user=Object.values(e)[0].uid}};const os=(0,k.Z)(ts,[["render",Qe]]);var as=os,rs={name:"SidebarAdmin",components:{AllUsers:as},props:{open:Boolean}};const is=(0,k.Z)(rs,[["render",Fe]]);var ls=is,us={name:"App",components:{MessageContainer:we,Modal:Te,Header:x,LoginUser:Se,RegistrationUser:Pe,SidebarAdmin:ls},data(){return{openModal:!1,modalLogin:!0,name:"",statusSidebarAdmin:!0,isAdmin:!1}},methods:{showModalLogin(){this.openModal=!0,this.modalLogin=!0},showModalRegistration(){this.openModal=!0,this.modalLogin=!1},closeModal(){this.openModal=!1},openSidebarAdmin(){this.statusSidebarAdmin=!this.statusSidebarAdmin}},async mounted(){ae.then((e=>this.isAdmin=e))}};const cs=(0,k.Z)(us,[["render",c]]);var ds=cs,ms=n(887);const gs=(0,ms.IH)(w);(0,ms.Kz)(gs,"notification_received"),(0,t.ri)(ds).mount("#app")}},s={};function n(t){var o=s[t];if(void 0!==o)return o.exports;var a=s[t]={exports:{}};return e[t](a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(s,t,o,a){if(!t){var r=1/0;for(c=0;c<e.length;c++){t=e[c][0],o=e[c][1],a=e[c][2];for(var i=!0,l=0;l<t.length;l++)(!1&a||r>=a)&&Object.keys(n.O).every((function(e){return n.O[e](t[l])}))?t.splice(l--,1):(i=!1,a<r&&(r=a));if(i){e.splice(c--,1);var u=o();void 0!==u&&(s=u)}}return s}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[t,o,a]}}(),function(){n.d=function(e,s){for(var t in s)n.o(s,t)&&!n.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:s[t]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)}}(),function(){n.p="/chat/"}(),function(){var e={143:0};n.O.j=function(s){return 0===e[s]};var s=function(s,t){var o,a,r=t[0],i=t[1],l=t[2],u=0;if(r.some((function(s){return 0!==e[s]}))){for(o in i)n.o(i,o)&&(n.m[o]=i[o]);if(l)var c=l(n)}for(s&&s(t);u<r.length;u++)a=r[u],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(c)},t=self["webpackChunkchat"]=self["webpackChunkchat"]||[];t.forEach(s.bind(null,0)),t.push=s.bind(null,t.push.bind(t))}();var t=n.O(void 0,[998],(function(){return n(816)}));t=n.O(t)})();
//# sourceMappingURL=app.16413200.js.map